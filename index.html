<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Number Guessing Game</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div id="game" class="bg-white p-6 rounded shadow w-full max-w-sm">
    <h1 class="text-2xl font-bold mb-4">Number Guessing Game</h1>
    <p class="mb-2 text-gray-600">Guess the 7-digit number!</p>
    <input 
      id="userInput" 
      type="text" 
      maxlength="7" 
      placeholder="Enter 7-digit number" 
      class="block w-full p-2 border rounded mb-4 text-center">
    <button 
      onclick="checkNumber()" 
      class="w-full bg-blue-500 text-white py-2 rounded">Submit</button>
    <div id="message" class="mt-4 text-center text-gray-700"></div>
    <div id="attempts" class="mt-2 text-sm text-gray-600"></div>
  </div>

  <script>
    // إعداد الرقم المشفر
    const secretKey = "mySecretKey"; // مفتاح التشفير
    const correctNumber = "1234567"; // الرقم الصحيح
    const encryptedNumber = CryptoJS.AES.encrypt(correctNumber, secretKey).toString();
    localStorage.setItem("encryptedNumber", encryptedNumber);

    // الإعدادات
    const maxAttempts = 10;
    let attempts = 0;

    function checkNumber() {
      const userInput = document.getElementById("userInput").value;
      const message = document.getElementById("message");
      const attemptsDisplay = document.getElementById("attempts");

      // التحقق من المدخلات
      if (userInput.length !== 7) {
        message.textContent = "Please enter exactly 7 digits.";
        message.classList.add("text-red-500");
        return;
      }

      // زيادة عدد المحاولات
      attempts++;
      if (attempts > maxAttempts) {
        message.textContent = "You have exceeded the maximum attempts!";
        message.classList.add("text-red-500");
        return;
      }

      // فك التشفير والتحقق من الرقم
      const decryptedNumber = CryptoJS.AES.decrypt(localStorage.getItem("encryptedNumber"), secretKey).toString(CryptoJS.enc.Utf8);

      if (userInput === decryptedNumber) {
        message.textContent = "Congratulations! You guessed the correct number!";
        message.classList.remove("text-red-500");
        message.classList.add("text-green-500");
      } else {
        message.textContent = "Incorrect guess. Try again.";
        message.classList.remove("text-green-500");
        message.classList.add("text-red-500");
      }

      // تحديث المحاولات
      attemptsDisplay.textContent = `Attempts: ${attempts}/${maxAttempts}`;
      document.getElementById("userInput").value = "";
    }
  </script>

</body>
</html>
